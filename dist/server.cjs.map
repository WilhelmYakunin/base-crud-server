{"version":3,"file":"server.cjs","mappings":";;;;;;AAAA;AACA,EAAE,+BAA4B;AAC9B;AACA,QAAQ;AACR,MAAM,mBAAO,CAAC,CAAmB;AACjC,MAAM,mBAAO,CAAC,CAAmB;AACjC;AACA;AACA,CAAC;;;;;;;ACRD,WAAW,mBAAO,CAAC,CAAI;AACvB,aAAa,mBAAO,CAAC,CAAM;AAC3B,WAAW,mBAAO,CAAC,CAAI;;AAEvB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iCAAiC,QAAQ;AACzC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oEAAoE,UAAU;;AAE9E;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,IAAI;AACzB,YAAY;AACZ,qBAAqB,IAAI;AACzB;AACA;AACA;AACA,KAAK;;AAEL,aAAa;AACb,IAAI;AACJ;AACA,6BAA6B,YAAY,EAAE,UAAU;AACrD;;AAEA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB,oBAAoB;AACpB;;;;;;;;AC5GA;;;;;;;ACAA;;;;;;;ACAA;;;;;;ACAA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACnBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP;;;;;;;;;;;;;ACV2E;AAC3E;AACA;AACA;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,YAAY,mDAAM;AAClB;AACA;AACA,YAAY,kDAAK;AACjB;AACA;AACA,YAAY,qDAAQ;AACpB;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA,iEAAe,GAAG,EAAC;;;;;;;;;;;;;;;;;;;;;ACvBS;AACE;AACF;AACM;AACM;AACe;;;;;;;;;;;;;;;;;;ACL1B;AACS;AACT;AACe;AAC5C,gBAAgB,yCAAY;AAC5B;AACA;AACA;AACA,kBAAkB,wDAAW;AAC7B;AACA;AACA;AACA;AACA;AACA,wBAAwB,sCAAS;AACjC,sBAAsB,oDAAgB;AACtC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,oDAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA;AACA,mBAAmB,6DAAoB;AACvC;AACA;AACA;AACA,sBAAsB,yDAAgB,mBAAmB,wBAAwB;AACjF;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA,oBAAoB,8DAAqB,mBAAmB,wBAAwB;AACpF,mBAAmB,2DAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,KAAK,EAAC;;;;;;;;;;;;ACrErB;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;ACLY;AACX;AAC7B;AACA;AACA;AACA,kBAAkB,wDAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,6BAA6B;AACvG;AACA;AACA;AACA;AACA,8BAA8B,wDAAW;AACzC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA,mBAAmB,yDAAgB,mBAAmB,wDAAwD;AAC9G;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA,4BAA4B,6DAAoB;AAChD,YAAY,6DAAoB;AAChC,YAAY,gEAAuB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,yDAAgB;AACxB,QAAQ,yDAAgB;AACxB;AACA;AACA;AACA,KAAK;AACL;AACA,iEAAe,MAAM,EAAC;;;;;;;;;;;;AC/EtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;ACnBa;AACX;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA,mBAAmB,yDAAgB,mBAAmB,wBAAwB;AAC9E;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,6BAA6B;AACvG;AACA;AACA;AACA;AACA,8BAA8B,wDAAW;AACzC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,wDAAe;AACvB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;AC7EmB;AACX;AAC7B;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA,mBAAmB,yDAAgB,mBAAmB,wBAAwB;AAC9E;AACA;AACA,sBAAsB,wDAAW;AACjC;AACA;AACA;AACA;AACA,sBAAsB,8DAAqB,mBAAmB,wBAAwB;AACtF,wBAAwB,8DAAqB,mBAAmB,oCAAoC;AACpG,QAAQ,2DAAkB;AAC1B,QAAQ,2DAAkB;AAC1B;AACA;AACA;AACA,KAAK;AACL;AACA,iEAAe,QAAQ,EAAC;;;;;;;;ACnCxB;;;;;;;ACAA;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;ACNuB;AACC;AACK;AACC;AACL;AACzB;AACA;AACA,aAAa,8CAAiB,CAAC,4CAAG;AAClC,IAAI,0DAAiB;AACrB;AACA,gBAAgB,oCAAO;AACvB,oBAAoB,WAAW;AAC/B,QAAQ,mDAAY;AACpB;AACA;AACA;AACA;AACA,QAAQ,uDAAc;AACtB,aAAa,0DAAiB;AAC9B;AACA;AACA;AACA;AACA,KAAK;AACL","sources":["webpack://simple_crud_server/./node_modules/dotenv/config.js","webpack://simple_crud_server/./node_modules/dotenv/lib/main.js","webpack://simple_crud_server/external node-commonjs \"fs\"","webpack://simple_crud_server/external node-commonjs \"path\"","webpack://simple_crud_server/external node-commonjs \"os\"","webpack://simple_crud_server/./node_modules/dotenv/lib/env-options.js","webpack://simple_crud_server/./node_modules/dotenv/lib/cli-options.js","webpack://simple_crud_server/./src/app.ts","webpack://simple_crud_server/./src/controller/index.ts","webpack://simple_crud_server/./src/controller/onGet.ts","webpack://simple_crud_server/./src/model.ts","webpack://simple_crud_server/./src/controller/onPost.ts","webpack://simple_crud_server/./src/controller/createError.ts","webpack://simple_crud_server/./src/controller/onPut.ts","webpack://simple_crud_server/./src/controller/onDelete.ts","webpack://simple_crud_server/external node-commonjs \"http\"","webpack://simple_crud_server/external node-commonjs \"cluster\"","webpack://simple_crud_server/webpack/bootstrap","webpack://simple_crud_server/webpack/runtime/compat get default export","webpack://simple_crud_server/webpack/runtime/define property getters","webpack://simple_crud_server/webpack/runtime/hasOwnProperty shorthand","webpack://simple_crud_server/webpack/runtime/make namespace object","webpack://simple_crud_server/./src/multi.ts"],"sourcesContent":["(function () {\n  require('./lib/main').config(\n    Object.assign(\n      {},\n      require('./lib/env-options'),\n      require('./lib/cli-options')(process.argv)\n    )\n  )\n})()\n","const fs = require('fs')\nconst path = require('path')\nconst os = require('os')\n\nconst LINE = /(?:^|^)\\s*(?:export\\s+)?([\\w.-]+)(?:\\s*=\\s*?|:\\s+?)(\\s*'(?:\\\\'|[^'])*'|\\s*\"(?:\\\\\"|[^\"])*\"|\\s*`(?:\\\\`|[^`])*`|[^#\\r\\n]+)?\\s*(?:#.*)?(?:$|$)/mg\n\n// Parser src into an Object\nfunction parse (src) {\n  const obj = {}\n\n  // Convert buffer to string\n  let lines = src.toString()\n\n  // Convert line breaks to same format\n  lines = lines.replace(/\\r\\n?/mg, '\\n')\n\n  let match\n  while ((match = LINE.exec(lines)) != null) {\n    const key = match[1]\n\n    // Default undefined or null to empty string\n    let value = (match[2] || '')\n\n    // Remove whitespace\n    value = value.trim()\n\n    // Check if double quoted\n    const maybeQuote = value[0]\n\n    // Remove surrounding quotes\n    value = value.replace(/^(['\"`])([\\s\\S]*)\\1$/mg, '$2')\n\n    // Expand newlines if double quoted\n    if (maybeQuote === '\"') {\n      value = value.replace(/\\\\n/g, '\\n')\n      value = value.replace(/\\\\r/g, '\\r')\n    }\n\n    // Add to object\n    obj[key] = value\n  }\n\n  return obj\n}\n\nfunction _log (message) {\n  console.log(`[dotenv][DEBUG] ${message}`)\n}\n\nfunction _resolveHome (envPath) {\n  return envPath[0] === '~' ? path.join(os.homedir(), envPath.slice(1)) : envPath\n}\n\n// Populates process.env from .env file\nfunction config (options) {\n  let dotenvPath = path.resolve(process.cwd(), '.env')\n  let encoding = 'utf8'\n  const debug = Boolean(options && options.debug)\n  const override = Boolean(options && options.override)\n\n  if (options) {\n    if (options.path != null) {\n      dotenvPath = _resolveHome(options.path)\n    }\n    if (options.encoding != null) {\n      encoding = options.encoding\n    }\n  }\n\n  try {\n    // Specifying an encoding returns a string instead of a buffer\n    const parsed = DotenvModule.parse(fs.readFileSync(dotenvPath, { encoding }))\n\n    Object.keys(parsed).forEach(function (key) {\n      if (!Object.prototype.hasOwnProperty.call(process.env, key)) {\n        process.env[key] = parsed[key]\n      } else {\n        if (override === true) {\n          process.env[key] = parsed[key]\n        }\n\n        if (debug) {\n          if (override === true) {\n            _log(`\"${key}\" is already defined in \\`process.env\\` and WAS overwritten`)\n          } else {\n            _log(`\"${key}\" is already defined in \\`process.env\\` and was NOT overwritten`)\n          }\n        }\n      }\n    })\n\n    return { parsed }\n  } catch (e) {\n    if (debug) {\n      _log(`Failed to load ${dotenvPath} ${e.message}`)\n    }\n\n    return { error: e }\n  }\n}\n\nconst DotenvModule = {\n  config,\n  parse\n}\n\nmodule.exports.config = DotenvModule.config\nmodule.exports.parse = DotenvModule.parse\nmodule.exports = DotenvModule\n","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"os\");","// ../config.js accepts options via environment variables\nconst options = {}\n\nif (process.env.DOTENV_CONFIG_ENCODING != null) {\n  options.encoding = process.env.DOTENV_CONFIG_ENCODING\n}\n\nif (process.env.DOTENV_CONFIG_PATH != null) {\n  options.path = process.env.DOTENV_CONFIG_PATH\n}\n\nif (process.env.DOTENV_CONFIG_DEBUG != null) {\n  options.debug = process.env.DOTENV_CONFIG_DEBUG\n}\n\nif (process.env.DOTENV_CONFIG_OVERRIDE != null) {\n  options.override = process.env.DOTENV_CONFIG_OVERRIDE\n}\n\nmodule.exports = options\n","const re = /^dotenv_config_(encoding|path|debug|override)=(.+)$/\n\nmodule.exports = function optionMatcher (args) {\n  return args.reduce(function (acc, cur) {\n    const matches = cur.match(re)\n    if (matches) {\n      acc[matches[1]] = matches[2]\n    }\n    return acc\n  }, {})\n}\n","import { onGet, onPost, onPut, onDelete, createError } from './controller';\r\nvar app = function (req, res) {\r\n    var method = req.method, url = req.url;\r\n    switch (method) {\r\n        case 'GET':\r\n            onGet(url, res);\r\n            break;\r\n        case 'POST':\r\n            onPost(req, res);\r\n            break;\r\n        case 'PUT':\r\n            onPut(req, res);\r\n            break;\r\n        case 'DELETE':\r\n            onDelete(req, res);\r\n            break;\r\n        default:\r\n            res.statusCode = 500;\r\n            var err = createError(500, \"somthing went wrong on server side method: \".concat(method, \" url: \").concat(url));\r\n            res.write(JSON.stringify(err, null, 2));\r\n            return res.end();\r\n    }\r\n};\r\nexport default app;\r\n","import onGet from './onGet';\r\nimport onPost from './onPost';\r\nimport onPut from './onPut';\r\nimport onDelete from './onDelete';\r\nimport createError from './createError';\r\nexport { onGet, onPost, onPut, onDelete, createError };\r\n","import * as path from 'path';\r\nimport { createReadStream } from 'fs';\r\nimport state from '../model';\r\nimport { createError } from '../controller';\r\nvar __dirname = path.dirname(__filename);\r\nvar onGet = function (url, res) {\r\n    var sendError = function () {\r\n        res.statusCode = 404;\r\n        var err = createError(404, \"page \".concat(url, \" not found\"));\r\n        res.write(JSON.stringify(err, null, 2));\r\n        res.end();\r\n        return;\r\n    };\r\n    var sendIndex = function () {\r\n        var indexFile = path.join(__dirname, 'index.html');\r\n        var readble = createReadStream(indexFile);\r\n        readble.on('data', function (chunk) {\r\n            res.statusCode = 200;\r\n            res.write(chunk);\r\n        });\r\n        readble.on('end', function () {\r\n            res.end();\r\n            return;\r\n        });\r\n    };\r\n    var getAllusers = function () {\r\n        res.statusCode = 200;\r\n        res.write(JSON.stringify(state.users));\r\n        res.end();\r\n        return;\r\n    };\r\n    var indexofLastSlash = url.lastIndexOf('/');\r\n    var id = url.slice(indexofLastSlash + 1);\r\n    var sendUser = function () {\r\n        if (isNaN(Number(id)) && url.slice(0, 10) === '/api/users') {\r\n            res.statusCode = 400;\r\n            var err = createError(400, \"unknown type of the id \".concat(id, \" or url is incorect\"));\r\n            res.write(JSON.stringify(err, null, 2));\r\n            res.end();\r\n            return;\r\n        }\r\n        var isCorrectPage = function () {\r\n            return state.paths.includes(url);\r\n        };\r\n        if (!isCorrectPage() && url.slice(0, 10) !== '/api/users')\r\n            return sendError();\r\n        var hasUser = state.users.find(function (user) { return user.id === id; });\r\n        if (!hasUser) {\r\n            res.statusCode = 404;\r\n            var err = createError(404, \"user with the id \".concat(id, \" does not exist\"));\r\n            res.write(JSON.stringify(err, null, 2));\r\n            res.end();\r\n            return;\r\n        }\r\n        var index = state.users.findIndex(function (user) { return user.id === id; });\r\n        var user = state.users.splice(index, 1)[0];\r\n        res.write(JSON.stringify(user, null, 2));\r\n        res.end();\r\n        return;\r\n    };\r\n    switch (url) {\r\n        case '/':\r\n            return sendIndex();\r\n        case '/api/users':\r\n            return getAllusers();\r\n        default:\r\n            return sendUser();\r\n    }\r\n};\r\nexport default onGet;\r\n","var defaultState = {\r\n    users: [],\r\n    usersIDs: { count: 0, ids: [] },\r\n    paths: [],\r\n};\r\nexport default defaultState;\r\n","import createError from './createError';\r\nimport state from '../model';\r\nvar onPost = function (req, res) {\r\n    if (req.url !== '/api/users') {\r\n        res.statusCode = 404;\r\n        var err = createError(404, 'unknown url adress');\r\n        res.write(JSON.stringify(err, null, 2));\r\n        res.end();\r\n        return;\r\n    }\r\n    var userData = '';\r\n    req\r\n        .on('data', function (chunk) {\r\n        userData += chunk;\r\n    })\r\n        .on('end', function () {\r\n        var username;\r\n        var age;\r\n        var hobbies = [];\r\n        var reqPairs = userData.split('&');\r\n        var allPropsNames = [];\r\n        reqPairs.map(function (pair) {\r\n            switch (pair.split('=')[0]) {\r\n                case 'username':\r\n                    allPropsNames.push('username');\r\n                    return (username = pair.split('=')[1]);\r\n                case 'age':\r\n                    allPropsNames.push('age');\r\n                    return (age = Number(pair.split('=')[1]));\r\n                case 'hobbies':\r\n                    allPropsNames.push('hobbies');\r\n                    var hobbiesString = pair.split('=')[1];\r\n                    if (hobbiesString !== '') {\r\n                        hobbiesString.split('%2C').map(function (hobby) { return hobbies.push(hobby); });\r\n                    }\r\n                    return;\r\n                default:\r\n                    res.statusCode = 400;\r\n                    var err = createError(400, \"unknown input filed \".concat(pair.split('=')[0], \" with property \").concat(pair.split('=')[1]));\r\n                    res.write(JSON.stringify(err, null, 2));\r\n                    res.end();\r\n                    return;\r\n            }\r\n        });\r\n        var hasAllProps = Boolean(allPropsNames.includes('username') &&\r\n            allPropsNames.includes('age') &&\r\n            allPropsNames.includes('hobbies'));\r\n        if (!hasAllProps) {\r\n            res.statusCode = 400;\r\n            var err = createError(400, 'input does not contain all required fields');\r\n            res.write(JSON.stringify(err, null, 2));\r\n            return res.end();\r\n        }\r\n        var user = state.users.find(function (user) { return user.username === username && user.age === age; });\r\n        if (user) {\r\n            res.statusCode = 400;\r\n            var err = createError(400, \"user already exist\");\r\n            res.write(JSON.stringify(err, null, 2));\r\n            return res.end();\r\n        }\r\n        var getId = function () {\r\n            var id = String(state.usersIDs.count);\r\n            state.usersIDs.count += 1;\r\n            state.usersIDs.ids.push(id);\r\n            return id;\r\n        };\r\n        var newUser = {\r\n            id: String(getId()),\r\n            username: username,\r\n            age: age,\r\n            hobbies: Boolean(hobbies) ? hobbies : [],\r\n        };\r\n        state.users.push(newUser);\r\n        state.paths.push('/api/users/' + newUser.id);\r\n        res.statusCode = 201;\r\n        res.write(JSON.stringify(newUser));\r\n        return res.end();\r\n    });\r\n};\r\nexport default onPost;\r\n","var createError = function (statusCode, message) {\r\n    var getStatusCodeClass = function (status) {\r\n        return Number(String(status).charAt(0) + '00');\r\n    };\r\n    if (statusCode < 400 || statusCode >= 600) {\r\n        return {\r\n            codeClass: 'not http or server error',\r\n            statusCode: statusCode,\r\n            message: message,\r\n        };\r\n    }\r\n    var isInternalErr = getStatusCodeClass(statusCode) === 500;\r\n    var codeClass = isInternalErr ? 'Internal server error' : 'Bad Request';\r\n    return {\r\n        codeClass: codeClass,\r\n        statusCode: statusCode,\r\n        message: message,\r\n    };\r\n};\r\nexport default createError;\r\n","import createError from './createError';\r\nimport state from '../model';\r\nvar onPut = function (req, res) {\r\n    var userData = '';\r\n    req\r\n        .on('data', function (chunk) {\r\n        userData += chunk;\r\n    })\r\n        .on('end', function () {\r\n        var indexofLastSlash = req.url.lastIndexOf('/');\r\n        var id = req.url.slice(indexofLastSlash + 1);\r\n        if (isNaN(Number(id))) {\r\n            res.statusCode = 400;\r\n            var err = createError(400, \"unknown type of the id \".concat(id, \" or url is incorect\"));\r\n            res.write(JSON.stringify(err, null, 2));\r\n            res.end();\r\n            return;\r\n        }\r\n        var user = state.users.find(function (user) { return user.id === id; });\r\n        if (!user) {\r\n            res.statusCode = 404;\r\n            var err = createError(404, \"user with the id \".concat(id, \" does not exist\"));\r\n            res.write(JSON.stringify(err, null, 2));\r\n            res.end();\r\n            return;\r\n        }\r\n        var username;\r\n        var age;\r\n        var hobbies = [];\r\n        var reqPairs = userData.split('&');\r\n        var allPropsNames = [];\r\n        reqPairs.map(function (pair) {\r\n            switch (pair.split('=')[0]) {\r\n                case 'username':\r\n                    allPropsNames.push('username');\r\n                    return (username = pair.split('=')[1]);\r\n                case 'age':\r\n                    allPropsNames.push('age');\r\n                    return (age = Number(pair.split('=')[1]));\r\n                case 'hobbies':\r\n                    allPropsNames.push('hobbies');\r\n                    var hobbiesString = pair.split('=')[1];\r\n                    if (hobbiesString !== '') {\r\n                        hobbiesString.split('%2C').map(function (hobby) { return hobbies.push(hobby); });\r\n                    }\r\n                    return;\r\n                default:\r\n                    res.statusCode = 400;\r\n                    var err = createError(400, \"unknown input filed \".concat(pair.split('=')[0], \" with property \").concat(pair.split('=')[1]));\r\n                    res.write(JSON.stringify(err, null, 2));\r\n                    res.end();\r\n                    return;\r\n            }\r\n        });\r\n        var hasAllProps = Boolean(allPropsNames.includes('username') &&\r\n            allPropsNames.includes('age') &&\r\n            allPropsNames.includes('hobbies'));\r\n        if (!hasAllProps) {\r\n            res.statusCode = 400;\r\n            var err = createError(400, 'input does not contain all required fields');\r\n            res.write(JSON.stringify(err, null, 2));\r\n            return res.end();\r\n        }\r\n        var newUserInfo = {\r\n            username: username,\r\n            age: age,\r\n            hobbies: Boolean(hobbies) ? hobbies : [],\r\n        };\r\n        state.users.map(function (user) {\r\n            if (user.id === id) {\r\n                Object.assign(user, newUserInfo);\r\n            }\r\n        });\r\n        res.write(JSON.stringify(newUserInfo));\r\n        res.end();\r\n    });\r\n};\r\nexport default onPut;\r\n","import createError from './createError';\r\nimport state from '../model';\r\nvar onDelete = function (req, res) {\r\n    var userData = '';\r\n    req\r\n        .on('data', function (chunk) {\r\n        userData += chunk;\r\n    })\r\n        .on('end', function () {\r\n        var indexofLastSlash = req.url.lastIndexOf('/');\r\n        var id = req.url.slice(indexofLastSlash + 1);\r\n        if (isNaN(Number(id))) {\r\n            res.statusCode = 400;\r\n            var err = createError(400, \"the id \".concat(id, \" is invalid or url is incorect\"));\r\n            res.write(JSON.stringify(err, null, 2));\r\n            res.end();\r\n            return;\r\n        }\r\n        var user = state.users.find(function (user) { return user.id === id; });\r\n        if (!user) {\r\n            res.statusCode = 404;\r\n            var err = createError(404, \"user with the id \".concat(id, \" does not exist\"));\r\n            res.write(JSON.stringify(err, null, 2));\r\n            res.end();\r\n            return;\r\n        }\r\n        var IDindex = state.users.findIndex(function (user) { return user.id === id; });\r\n        var pathIndex = state.paths.findIndex(function (path) { return path === 'api/users/' + id; });\r\n        state.users.splice(IDindex, 1);\r\n        state.paths.splice(pathIndex, 1);\r\n        res.statusCode = 204;\r\n        res.write(\"the user with id: \".concat(id, \" deleted\"));\r\n        res.end();\r\n    });\r\n};\r\nexport default onDelete;\r\n","module.exports = require(\"http\");","module.exports = require(\"cluster\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import 'dotenv/config';\r\nimport app from './app';\r\nimport * as http from 'http';\r\nimport cluster from 'cluster';\r\nimport * as os from 'os';\r\nvar env = process.env, pid = process.pid;\r\nvar port = env.port;\r\nvar server = http.createServer(app);\r\nif (cluster.isPrimary) {\r\n    process.stdout.write(\"Main server pid: \".concat(pid, \" \\n\"));\r\n    var count = os.cpus().length;\r\n    for (var i = 0; i < count; i += 1) {\r\n        cluster.fork();\r\n    }\r\n}\r\nelse {\r\n    var id = void 0;\r\n    if (cluster.worker) {\r\n        id = cluster.worker.id;\r\n    }\r\n    process.stdout.write(\"worker ID: \".concat(id, \", pid: \").concat(pid, \", port: \").concat(port, \" \\n\"));\r\n    server.listen(port, function () {\r\n        process.stdout.write(\"Server is running on port: \".concat(port, \" \\npid is: \").concat(pid, \" \\n\"));\r\n    });\r\n}\r\n"],"names":[],"sourceRoot":""}